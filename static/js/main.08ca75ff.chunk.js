(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{14:function(e,t,a){},15:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(6),l=a.n(r),o=(a(14),a(4)),u=a(1),s=a(7),i=a(8),m=new(function(){function e(t){Object(s.a)(this,e),this.url=t.baseUrl}return Object(i.a)(e,[{key:"getData",value:function(){return fetch("".concat(this.url,"/start"),{method:"GET"}).then((function(e){return e.ok?e.json():Promise.reject(new Error("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status)))}))}},{key:"getMore",value:function(e,t){var a=e.value,n=e.condition,c=e.keyword,r="".concat(this.url,"/more?value=").concat(a,"&condition=").concat(n,"&keyword=").concat(c);return t&&(r+="&page=".concat(t)),fetch(r,{method:"GET"}).then((function(e){return e.ok?e.json():Promise.reject(new Error("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status)))}))}}]),e}())({baseUrl:"http://localhost:8080"});var f=function(e){var t=c.a.useState("none"),a=Object(u.a)(t,2),n=a[0],r=a[1],l=c.a.useState("includes"),o=Object(u.a)(l,2),s=o[0],i=o[1],f=c.a.useState(""),E=Object(u.a)(f,2),d=E[0],h=E[1],v=c.a.useState(!1),g=Object(u.a)(v,2),p=g[0],w=g[1];return c.a.useEffect((function(){var t={value:n,condition:s,keyword:d||"none"};e.setFilterData(t),p&&m.getMore(t).then((function(t){var a=t.data;t.data.length<50?e.setLastData(!0):e.setLastData(!1),e.setDB(a),t.message&&e.setAlert(t.message)})).catch((function(e){console.log(e)})),w(!1)}),[p]),c.a.createElement("header",null,c.a.createElement("select",{onChange:function(e){r(e.target.value),w(!0)},defaultValue:"none"},c.a.createElement("option",{value:"none"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b\u0435"),c.a.createElement("option",{value:"name"},"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),c.a.createElement("option",{value:"quantity"},"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"),c.a.createElement("option",{value:"distance"},"\u0420\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435")),c.a.createElement("select",{onInput:function(e){i(e.target.value),w(!0)},defaultValue:"includes"},c.a.createElement("option",{value:"includes"},"\u0421\u043e\u0434\u0435\u0440\u0436\u0438\u0442"),c.a.createElement("option",{value:"equals"},"\u0420\u0430\u0432\u043d\u043e"),c.a.createElement("option",{value:"larger"},"\u0411\u043e\u043b\u044c\u0448\u0435"),c.a.createElement("option",{value:"less"},"\u041c\u0435\u043d\u044c\u0448\u0435")),c.a.createElement("input",{type:"text",value:d,onChange:function(e){h(e.target.value),function(e,t,a){var n=Date.now(),c=setTimeout((function(){return e(a)}),t)}(w,1e3,!0)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u0441\u043a\u043e\u043c\u044b\u0439 \u0442\u0435\u043a\u0441\u0442"}))};var E=function(e){return c.a.createElement("tr",null,c.a.createElement("td",null,e.item.date),c.a.createElement("td",null,e.item.name),c.a.createElement("td",null,e.item.quantity),c.a.createElement("td",null,e.item.distance))};var d=function(){return c.a.createElement("footer",null,c.a.createElement("p",null,"\xa9 2022 \u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u0410\u043a\u0443\u043b\u0438\u0447"))};var h=function(){var e=c.a.useState(!1),t=Object(u.a)(e,2),a=t[0],n=t[1],r=c.a.useState(!1),l=Object(u.a)(r,2),s=l[0],i=l[1],h=c.a.useState(!1),v=Object(u.a)(h,2),g=v[0],p=v[1],w=c.a.useState([]),b=Object(u.a)(w,2),j=b[0],O=b[1],y=c.a.useState(0),S=Object(u.a)(y,2),k=S[0],D=S[1],L=c.a.useState(1),N=Object(u.a)(L,2),T=N[0],q=N[1],B=c.a.useState(""),M=Object(u.a)(B,2),P=M[0],A=M[1],F=c.a.useState({value:"none",condition:"includes",keyword:"none"}),x=Object(u.a)(F,2),C=x[0],G=x[1];return c.a.useEffect((function(){if(""!==P){i(!0);var e=setTimeout((function(){i(!1),A("")}),1500);return function(){return clearTimeout(e)}}}),[P]),c.a.useEffect((function(){m.getData().then((function(e){O(e.data),e.data.length<50?p(!0):p(!1),n(!0),e.message&&A(e.message)})).catch((function(e){console.log(e)}))}),[]),c.a.useEffect((function(){var e=function(){return D(window.pageYOffset)};return window.removeEventListener("scroll",e),window.addEventListener("scroll",e,{passive:!0}),function(){return window.removeEventListener("scroll",e)}}),[]),c.a.useEffect((function(){var e=document.querySelector("html");!g&&k>e.offsetHeight-e.clientHeight-1&&(q(T+1),m.getMore(C,T).then((function(e){e.data.length<50?p(!0):p(!1);var t=[].concat(Object(o.a)(j),Object(o.a)(e.data));O(t),e.message&&A(e.message)})).catch((function(e){console.log(e)})))}),[k]),c.a.createElement("section",{className:"page"},a?c.a.createElement(c.a.Fragment,null,c.a.createElement(f,{filterData:C,setFilterData:G,setDB:O,setAlert:A,setLastData:p}),c.a.createElement("main",null,c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"\u0414\u0430\u0442\u0430"),c.a.createElement("th",null,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),c.a.createElement("th",null,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"),c.a.createElement("th",null,"\u0420\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435"))),c.a.createElement("tbody",null,j.map((function(e,t){if(e.date)return c.a.createElement(E,{key:t,item:e})})))))):c.a.createElement("section",{className:"page"},c.a.createElement("h2",null,"\u041d\u0435\u0442 \u0441\u0432\u044f\u0437\u0438 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u043c. \u0423\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044c, \u0447\u0442\u043e \u043e\u043d \u0437\u0430\u043f\u0443\u0449\u0435\u043d \u0438 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443")),g?"":c.a.createElement("section",{className:"Preloader"},c.a.createElement("figure",{className:"Preloader__rotator"})),c.a.createElement(d,null),c.a.createElement("article",{className:"".concat(s&&"showArticle")},c.a.createElement("h2",null,P)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(h,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e,t,a){e.exports=a(15)}},[[9,1,2]]]);
//# sourceMappingURL=main.08ca75ff.chunk.js.map